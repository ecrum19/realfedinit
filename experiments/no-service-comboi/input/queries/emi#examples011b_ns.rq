# Datasources: sparql@https://biosoda.unil.ch/emi/sparql sparql@https://qlever.cs.uni-freiburg.de/api/wikidata
PREFIX emi: <https://purl.org/emi#>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX qudt: <https://qudt.org/2.1/schema/qudt#>
SELECT DISTINCT ?source_wd ?sourceNameURI ?tryDataLab ?tryDataVal ?unit ?unitComment
WHERE {
	?trySpObs sosa:isSampleOf ?source_trySpName ;
		sosa:isFeatureOfInterestOf ?tryObId .
	?source_trySpName emi:inTaxon ?source_wd .
	?tryObId sosa:hasResult ?tryData .
	?tryData rdfs:label ?tryDataLab ;
		rdf:type emi:Trait ;
		rdf:value ?tryDataVal ;
		qudt:hasUnit ?unit .
	OPTIONAL { ?tryData rdfs:comment ?unitComment . }
		{
		?source_wd wdt:P141 wd:Q719675 .
	}
	BIND(REPLACE(STR(?source_trySpName), "%20", " ") AS ?sourceNameX)
	BIND(IRI(?sourceNameX) AS ?sourceNameURI)
}